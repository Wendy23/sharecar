<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic Page Needs
    ================================================== -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        ShareCar
    </title>
    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="images/favicon.jpg" />
    <!-- Styles -->
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css" type="text/css" />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="fonts/font-awesome/css/font-awesome.min.css" type="text/css" />
    <!-- Style -->
    <!--  <link rel="stylesheet" href="css/responsive.css" type="text/css" /> -->
    <!-- Responsive -->
    <link rel="stylesheet" href="/stylesheets/colors.css" type="text/css" />
    <!-- color -->
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <!--Slides-->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <!--Date-->
    <link rel='stylesheet' href='/stylesheets/datepicker.css' />
    <!--Time-->
    <link rel='stylesheet' href='/stylesheets/bootstrap-timepicker.min.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
    <!-- /.preloader -->
    <div id="preloader"></div>
    <div class="theme-layout">
        <!-- Header -->
        <header class="simple-header for-sticky white">
            <!-- Top bar -->
            <div class="top-bar">
                <div class="container">
                    <ul class="contact-item">
                        <li><i class="fa fa-envelope-o"></i>yourcompnay@email.com</li>
                        <li><i class="fa fa-mobile"></i>+1 333 44 555 / +1 333 44 500</li>
                    </ul>
                    <div class="choose-language">
                        <a href="#" title="">EN</a>
                        <a href="#" title="">CH</a>
                    </div>
                </div>
            </div>
            <div class="menu">
                <div class="container">
                    <!-- LOGO -->
                    <div class="logo">
                        <span>ShareCar</span>
                        <strong>CITY CARPOOL</strong>
                    </div>
                    <span class="menu-toggle"><i class="fa fa-bars"></i></span>
                    <nav>
                        <h1 class="nocontent outline">--- Main Navigation ---</h1>
                        <ul>
                            <li class="menu-item-has-children">
                                <a href="#" title="">HOME</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#" title="">ABOUT</a>
                                <ul>
                                    <li><a href="#" title="">Overview</a></li>
                                    <li><a href="#" title="">Q&A</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#" title="">SEARCH</a>
                            </li>
                            <li><a href="#" title="">CONTACT</a></li>
                            <li><a href="#" title=""><strong>Welcome, <%- user.name %></strong></a></li>
                            <li>
                                <a href="/logout" title="">
                                    <span><i class="fa fa-sign-out "></i> logout</span></a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <section>
            <h1>Show my created routes</h1>
            <a href="/createRoute" class="btn btn-link" role="button">Add more</a>
        </section>
        <section>
            <!-- <div class="col-sm-3"></div> -->
            <table class="table">
                <thead>
                    <tr>
                        <th>Dept Time</th>
                        <th>Dept Hour</th>
                        <th>PostalCode</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background-color:white">
                        <% for (var i =0; i<driverroutes.length;i++){%>
                            <td class="drivedate">
                                <%=driverroutes[i].dridate%>
                            </td>
                            <td class="drivehour">
                                <%=driverroutes[i].drihour %>
                            </td>
                            <td class="drivepcode">
                                <%=driverroutes[i].pcode%>
                            </td>
                            <td type="submit" style="width: 70px;" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editdialog" data-id="<%= driverroutes[i]._id%>">Edit</td>
                            <td type="delete" style="width: 70px;" class="btn btn-primary btn-sm" id="btndelete" routeId="<%= driverroutes[i]._id%>">Delete</td>
                            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editdialog">Test</button> -->
                    </tr>
                    <%}%>
                </tbody>
            </table>
        </section>
        <div class="modal fade" id="editdialog" tabindex="-1" role="dialog" aria-labelledby="ModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="ModalLabel">Edit Info</h4>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="dridate" class="control-label">Dept Date:</label>
                                <input type="text" class="form-control" id="dridate">
                            </div>
                            <div class="form-group">
                                <label for="drihour" class="control-label">Dept Hour:</label>
                                <input type="text" class="form-control" id="drihour">
                            </div>
                            <div class="form-group">
                                <label for="pcode" class="control-label">Postal Code:</label>
                                <input type="text" class="form-control" id="pcode">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="submit" id="confirm" class="btn btn-primary">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="col-sm-3"></div> -->
        <!--End of form_row div-->
    </div>
    <!-- Script -->
    <script type="text/javascript" src="js/modernizr.js"></script>
    <!-- Modernizer -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <!-- Jquery -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- Bootstrap -->
    <script type="text/javascript" src="js/html5lightbox.js"></script>
    <!-- HTML -->
    <script type="text/javascript" src="js/scrolly.js"></script>
    <!-- Parallax -->
    <script type="text/javascript" src="js/price-range.js"></script>
    <!-- Parallax -->
    <script type="text/javascript" src="js/script.js"></script>
    <!-- Script -->
    <script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
    <!-- Date -->
    <script type="text/javascript" src="js/bootstrap-timepicker.min.js"></script>
    <!-- Time -->
    <script src="js/rs-plugin/js/jquery.themepunch.tools.min.js"></script>
    <script src="js/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        // $("li").hover(function() {
        //     $(this).css("background-color", "#f8f8f8");
        // }, function() {
        //     $(this).css("background-color", "white")
        // });

        // $('#DriverDeptDate').datepicker();
        // $("li").hover(function() {
        //     $(this).css("background-color", "#f8f8f8");
        // }, function() {
        //     $(this).css("background-color", "yellow")
        // });
        // $("a").click(function() {
        //     console.log("this is a route");
        //     console.log("this route id is" + $(this).attr("routeId"));
        //     $('#DriverDeptHour').hide();
        // })

        // $("#btnSubmit").click(function() {
        //     $.post("/driverroutes/updateRoute", {
        //             field: 'DriverDeptDate',
        //             value: $('#DriverDeptDate').val(),
        //             field: 'DriverDeptHour',
        //             value: $('#DriverDeptHour').val(),
        //             field: 'PostalCode',
        //             value: $('#PostalCode').val()
        //         })
        //         .done(function(res) {
        //             alert(res);
        //         });
        //     $('#DriverDeptDate').html($('#DriverDeptDate').val());
        //     $('#DriverDeptHour').html($('#DriverDeptHour').val());
        //     $('#PostalCode').html($('#PostalCode').val());
        // });
        
        var currentRoute;

        $('#editdialog').on('show.bs.modal', function(event) {
            //$(this).removeClass('modal-backdrop');
            //Now set z-index of modal greater than backdrop
            var button = $(event.relatedTarget) // Button that triggered the modal
            //ajax here
            var modal = $(this)
            modal.find('.modal-title').text('Edit Info');
            setTimeout(function(){
                modal.find('.modal-backdrop').remove();
            }, 200);
            currentRoute = button.attr("data-id");
            console.log(currentRoute);
        })

        $('#confirm').on('click', function(event) {

             $.post("/driverroutes/updateRoute?routeId=" + currentRoute, {
                    dridate: $('#dridate').val(),
                    drihour: $('#drihour').val(),
                    pcode: $('#pcode').val()
                })
                .done(function(res) {
                    location.reload();
                });
            $('#dridate').html($('#dridate').val());
            $('#drihour').html($('#drihour').val());
            $('#pcode').html($('#pcode').val());

        })


        // $("#confirm").click(function() {
        //         console.log("dd");
        //     })
    })
    "use strict";
    jQuery('.tp-banner').show().revolution({
        dottedOverlay: "none",
        delay: 16000, //revolution
        startwidth: 1170,
        startheight: 700,
        hideThumbs: 200,
        thumbWidth: 100,
        thumbHeight: 50,
        thumbAmount: 5,
        navigationType: "bullet",
        navigationArrows: "solo",
        navigationStyle: "preview1",
        touchenabled: "on",
        onHoverStop: "on",
        swipe_velocity: 0.7,
        swipe_min_touches: 1,
        swipe_max_touches: 1,
        drag_block_vertical: false,
        parallax: "mouse",
        parallaxBgFreeze: "on",
        parallaxLevels: [7, 4, 3, 2, 5, 4, 3, 2, 1, 0],
        keyboardNavigation: "off",
        navigationHAlign: "center",
        navigationVAlign: "bottom",
        navigationHOffset: 0,
        navigationVOffset: 20,
        soloArrowLeftHalign: "left",
        soloArrowLeftValign: "center",
        soloArrowLeftHOffset: 20,
        soloArrowLeftVOffset: 0,
        soloArrowRightHalign: "right",
        soloArrowRightValign: "center",
        soloArrowRightHOffset: 20,
        soloArrowRightVOffset: 0,
        shadow: 0,
        fullWidth: "on",
        fullScreen: "off",
        spinner: "spinner4",
        stopLoop: "off",
        stopAfterLoops: -1,
        stopAtSlide: -1,
        shuffle: "off",
        autoHeight: "off",
        forceFullWidth: "off",
        hideThumbsOnMobile: "off",
        hideNavDelayOnMobile: 1500,
        hideBulletsOnMobile: "off",
        hideArrowsOnMobile: "off",
        hideThumbsUnderResolution: 0,
        hideSliderAtLimit: 0,
        hideCaptionAtLimit: 0,
        hideAllCaptionAtLilmit: 0,
        startWithSlide: 0,
        videoJsPath: "rs-plugin/videojs/",
        fullScreenOffsetContainer: ""
    });
    </script>
</body>

</html>
